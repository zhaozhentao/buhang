(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70c56093"],{1696:function(t,e,r){"use strict";r.d(e,"d",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return s})),r.d(e,"f",(function(){return c})),r.d(e,"e",(function(){return l}));var n=r("b775");function a(t){return Object(n["a"])({url:"/cards",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/cards/".concat(t,"/card_items"),method:"get"})}function o(t){return Object(n["a"])({url:"/cards",method:"post",params:t})}function s(t){return Object(n["a"])({url:"/cards/".concat(t),method:"delete"})}function c(t){return Object(n["a"])({url:"/cards/".concat(t.id),method:"patch",params:t})}function l(t){return Object(n["a"])({url:"/cards",method:"patch",data:t})}},"90fe":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-button",{attrs:{type:"primary"},on:{click:t.createEdit}},[t._v("添加分类")])],1),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.$index)+"\n      ")]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"分类名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.name)+"\n      ")]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center",width:"260","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.addCard(n)}}},[t._v("\n          添加色卡\n        ")]),t._v(" "),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.edit(n)}}},[t._v("\n          编辑\n        ")]),t._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteRow(n)}}},[t._v("\n          删除\n        ")])]}}])})],1),t._v(" "),r("el-dialog",{attrs:{title:"添加分类",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{ref:"dataForm",attrs:{rules:t.rules,model:t.form,"label-position":"left","label-width":"150px"}},[r("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[r("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("\n        取消\n      ")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.create()}}},[t._v("\n        确认\n      ")])],1)],1),t._v(" "),r("el-dialog",{attrs:{title:"添加色卡",visible:t.addCardDialog},on:{"update:visible":function(e){t.addCardDialog=e}}},[r("el-form",{ref:"dataForm",attrs:{rules:t.rules,model:t.cardForm,"label-position":"left","label-width":"150px"}},[r("el-form-item",{attrs:{label:"货号",prop:"name"}},[r("el-input",{model:{value:t.cardForm.goods_number,callback:function(e){t.$set(t.cardForm,"goods_number",e)},expression:"cardForm.goods_number"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"品名",prop:"name"}},[r("el-input",{model:{value:t.cardForm.goods_name,callback:function(e){t.$set(t.cardForm,"goods_name",e)},expression:"cardForm.goods_name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"克重(g)",prop:"name"}},[r("el-input",{model:{value:t.cardForm.weight,callback:function(e){t.$set(t.cardForm,"weight",e)},expression:"cardForm.weight"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"幅宽(cm)",prop:"name"}},[r("el-input",{attrs:{type:"number"},model:{value:t.cardForm.width,callback:function(e){t.$set(t.cardForm,"width",e)},expression:"cardForm.width"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"每公斤(米)",prop:"name"}},[r("el-input",{attrs:{type:"number"},model:{value:t.cardForm.meterPerKilo,callback:function(e){t.$set(t.cardForm,"meterPerKilo",e)},expression:"cardForm.meterPerKilo"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"色卡封面图片",prop:"image"}},[r("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{multiple:"",action:"/api/files","on-success":t.onSuccess,"on-remove":t.onRemove,"file-list":t.fileList}},[r("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.addCardDialog=!1}}},[t._v("\n        取消\n      ")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.createCard()}}},[t._v("\n        确认\n      ")])],1)],1)],1)},a=[],i=(r("96cf"),r("3b8d")),o=(r("7f7f"),r("2ef0")),s=r.n(o),c=r("ad8f"),l=r("1696"),u={data:function(){return{addCardDialog:!1,dialogFormVisible:!1,list:null,cardForm:{},form:{},rules:{},fileList:[],listLoading:!0,editing:!1,editRow:null}},created:function(){this.fetchData()},methods:{onSuccess:function(t){var e={name:t,response:t};this.fileList=s.a.concat(this.fileList,e)},onRemove:function(t){s.a.remove(this.fileList,(function(e){return e.name===t.name}))},addCard:function(t){this.addCardDialog=!0,this.cardForm.category_id=t.id},createCard:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.cardForm.img=this.fileList[0].name,t.next=3,Object(l["a"])(this.cardForm);case 3:this.$message.success("添加成功"),this.addCardDialog=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deleteRow:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("提示","确认删除?",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"});case 2:return t.next=4,Object(c["b"])(e.id);case 4:this.$message.success("删除成功"),this.fetchData();case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),createEdit:function(){this.dialogFormVisible=!0,this.editing=!1,this.form={}},edit:function(t){this.dialogFormVisible=!0,this.editing=!0,this.editRow=t,this.form=t},create:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.editing){t.next=6;break}return t.next=3,Object(c["c"])({id:this.editRow.id,name:this.form.name});case 3:this.$message.success("修改成功"),t.next=9;break;case 6:return t.next=8,Object(c["a"])({name:this.form.name});case 8:this.$message.success("添加成功");case 9:this.dialogFormVisible=!1,this.fetchData();case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),fetchData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.listLoading=!0,t.next=3,Object(c["d"])();case 3:e=t.sent,this.list=e.data,this.listLoading=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},d=u,m=r("2877"),f=Object(m["a"])(d,n,a,!1,null,null,null);e["default"]=f.exports},ad8f:function(t,e,r){"use strict";r.d(e,"d",(function(){return a})),r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return s}));var n=r("b775");function a(t){return Object(n["a"])({url:"/categories",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/categories",method:"post",params:t})}function o(t){return Object(n["a"])({url:"/categories/".concat(t),method:"delete"})}function s(t){return Object(n["a"])({url:"/categories/".concat(t.id),method:"patch",params:t})}}}]);